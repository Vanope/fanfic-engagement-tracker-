<!DOCTYPE html>
<html>
<head>
  <title>Kiki Nation Fanfic Engagement</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <style>
        :root {
            --sage-green: #9CAF88;
            --light-sage: #B8C5A6;
            --cream: #F5F3E7;
            --soft-white: #FEFDF8;
            --dark-text: #2D3319;
            --accent-green: #7A8B6B;
            --progress-bg: #E8EDE1;
        }
    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, var(--soft-white) 0%, var(--cream) 100%);
        color: var(--dark-text);
        min-height: 100vh;
        line-height: 1.6;
    }

    h1 {
        font-family: 'Crimson Text', serif;
        font-size: 2.5rem;
        font-weight: 600;
        color: var(--dark-text);
        margin-bottom: 0.5rem;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

</style>
</head>
<body>
  <h1>Kiki Nation's Current Note Count Comparison</h1>
  <canvas id="noteCountChart" width="800" height="400"></canvas>

  <script>
    async function fetchCSV(url) {
      const res = await fetch(url);
      const text = await res.text();
      return text;
    }

    function parseCSV(csvText) {
      const lines = csvText.trim().split('\n');
      const headers = lines[0].split(',');
      const rows = lines.slice(1).map(line => line.split(','));
      return { headers, rows };
    }

   async function drawChart() {
  const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTvp9eL1e2kY-x7FkanpGxB3WgWAqn9e90VpE85J5PR70IIMVPOT1bFECAtbe2YVKE1bqiF5nioy3XO/pub?output=csv';
  const csvText = await fetchCSV(csvUrl);
  const { headers, rows } = parseCSV(csvText);

  console.log('Headers:', headers);
  console.log('Rows sample:', rows.slice(0, 3));

  const titleIdx = headers.indexOf('Title');
  const noteCountIdx = headers.indexOf('NoteCount');

  if (titleIdx === -1 || noteCountIdx === -1) {
    console.error('CSV headers missing "Title" or "NoteCount"');
    return;
  }

  const labels = rows.map(row => row[titleIdx]);
  const data = rows.map(row => Number(row[noteCountIdx]));
  console.log('Data:', data);

  const ctx = document.getElementById('noteCountChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: labels,
      datasets: [{
        label: 'Note Count',
        data: data,
        backgroundColor: '#9CAF88',
        borderColor: '#9CAF88',      // same color for border

        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
}

drawChart();

  </script>
</body>
</html>
